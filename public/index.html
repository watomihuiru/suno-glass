<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Music Studio</title>
    <link rel="stylesheet" href="style.css">
    <!-- FontAwesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <!-- Фоновый градиент -->
    <div class="bg-gradient"></div>

    <div class="main-container">
        
        <!-- ЛЕВАЯ КОЛОНКА (Меню) -->
        <nav class="glass-panel sidebar">
            <div class="logo">
                <i class="fa-solid fa-wave-square"></i> Suno AI
            </div>
            <ul class="menu">
                <li class="active" data-tab="generate">
                    <i class="fa-solid fa-wand-magic-sparkles"></i> Generate
                </li>
                <li data-tab="extend">
                    <i class="fa-solid fa-arrows-left-right-to-line"></i> Extend
                </li>
                <li data-tab="cover">
                    <i class="fa-solid fa-microphone-lines"></i> Cover
                </li>
                <!-- Вкладка для логов -->
                <li data-tab="logs" class="logs-tab">
                    <i class="fa-solid fa-terminal"></i> API Logs
                </li>
            </ul>
        </nav>

        <!-- ЦЕНТРАЛЬНАЯ КОЛОНКА (Контент) -->
        <main class="content-area">
            
            <!-- СЕКЦИЯ: GENERATE -->
            <section id="generate" class="tab-content active">
                <div class="glass-panel content-card">
                    <h2>Create New Track</h2>
                    <p class="subtitle">Describe the song you want to hear</p>
                    
                    <form id="generateForm">
                        
                        <!-- Выбор версии модели -->
                        <div class="form-group">
                            <label style="margin-bottom: 12px; display:block;">Model Version</label>
                            <div class="model-selector">
                                <input type="radio" name="model" id="m_v3_5" value="V3_5">
                                <label for="m_v3_5">v3.5</label>

                                <input type="radio" name="model" id="m_v4" value="V4">
                                <label for="m_v4">v4</label>

                                <input type="radio" name="model" id="m_v4_5" value="V4_5">
                                <label for="m_v4_5">v4.5</label>

                                <input type="radio" name="model" id="m_v4_5_plus" value="V4_5_PLUS">
                                <label for="m_v4_5_plus">v4.5+</label>

                                <input type="radio" name="model" id="m_v5" value="V5" checked>
                                <label for="m_v5">v5</label>

                                <!-- Анимация ползунка -->
                                <div class="glider"></div>
                            </div>
                        </div>

                        <!-- Настройки (Instrumental / Custom Mode) -->
                        <div class="settings-grid">
                            <div class="toggle-group">
                                <label>Instrumental</label>
                                <label class="switch">
                                    <input type="checkbox" id="instrumental">
                                    <span class="slider round"></span>
                                </label>
                            </div>

                            <div class="toggle-group">
                                <label>Custom Mode</label>
                                <label class="switch">
                                    <input type="checkbox" id="customMode">
                                    <span class="slider round"></span>
                                </label>
                            </div>
                        </div>

                        <!-- Поля Custom Mode (Название, Стиль) -->
                        <div id="customFields" class="hidden">
                            <div class="form-group">
                                <label>Title</label>
                                <input type="text" id="title" placeholder="Song Title">
                            </div>
                            <div class="form-group">
                                <label>Style (Genre)</label>
                                <input type="text" id="style" placeholder="Pop, Rock, Electronic...">
                            </div>
                        </div>

                        <!-- Основное поле ввода (Prompt / Lyrics) -->
                        <div class="form-group" id="promptContainer">
                            <label id="promptLabel">Song Description</label>
                            <textarea id="prompt" placeholder="A futuristic synthwave track with deep bass and neon vibes..." required></textarea>
                        </div>

                        <button type="submit" class="generate-btn">
                            <i class="fa-solid fa-bolt"></i> Generate Music
                        </button>
                    </form>

                    <!-- Сообщение о статусе -->
                    <div id="statusMessage" class="status-box hidden">
                        <i class="fa-solid fa-circle-notch fa-spin"></i> Generating...
                    </div>
                </div>
            </section>

            <!-- СЕКЦИЯ: EXTEND (Заглушка) -->
            <section id="extend" class="tab-content">
                <div class="glass-panel content-card">
                    <h2>Extend Track</h2>
                    <p class="subtitle">Seamlessly continue an existing song</p>
                    <div class="skeleton-ui">
                        <button class="generate-btn disabled">Feature Coming Soon</button>
                    </div>
                </div>
            </section>

            <!-- СЕКЦИЯ: COVER (Заглушка) -->
            <section id="cover" class="tab-content">
                <div class="glass-panel content-card">
                    <h2>Remix / Cover</h2>
                    <p class="subtitle">Change the style of an audio file</p>
                    <div class="upload-area">
                        <i class="fa-solid fa-cloud-arrow-up"></i>
                        <p>Drop audio file here</p>
                    </div>
                </div>
            </section>

            <!-- СЕКЦИЯ: API LOGS -->
            <section id="logs" class="tab-content">
                <div class="glass-panel content-card">
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
                        <h2>API Responses</h2>
                        <button class="clear-logs-btn" id="clearLogsBtn">Clear Logs</button>
                    </div>
                    <!-- Контейнер для JSON логов -->
                    <div class="logs-container" id="jsonOutput">
                        <div class="log-entry info">Waiting for requests...</div>
                    </div>
                </div>
            </section>

        </main>

        <!-- ПРАВАЯ КОЛОНКА (Библиотека) -->
        <aside class="glass-panel library-panel">
            <div class="library-header">
                <h3><i class="fa-solid fa-music"></i> Library</h3>
            </div>
            <div class="library-list" id="libraryGrid">
                <div class="empty-state">No music generated yet.</div>
            </div>
        </aside>

    </div>

    <!-- НИЖНИЙ ПЛЕЕР -->
    <div class="glass-panel player-bar">
        <!-- Инфо о треке -->
        <div class="track-info">
            <img src="https://placehold.co/60" alt="" id="playerCover" class="player-cover">
            <div class="track-text">
                <h4 id="playerTitle">Select a track</h4>
                <div class="scrolling-text-container">
                    <p id="playerArtist">Suno AI</p>
                </div>
            </div>
        </div>
        
        <!-- Кнопки управления -->
        <div class="player-center-group">
            <div class="player-controls">
                <button class="control-btn" id="prevBtn"><i class="fa-solid fa-backward-step"></i></button>
                <button class="control-btn play-main" id="playPauseBtn"><i class="fa-solid fa-play"></i></button>
                <button class="control-btn" id="nextBtn"><i class="fa-solid fa-forward-step"></i></button>
            </div>
            
            <!-- Прогресс бар -->
            <div class="player-progress-container">
                <span id="currentTime" class="time-text">0:00</span>
                <input type="range" id="progressBar" value="0" min="0" max="100">
                <span id="duration" class="time-text">0:00</span>
            </div>
        </div>

        <!-- Отступ справа для баланса -->
        <div class="player-right-spacer" style="width: 250px;"></div>
        
        <!-- Скрытый аудио элемент -->
        <audio id="audioElement"></audio>
    </div>

    <!-- МОДАЛЬНОЕ ОКНО (Текст песни) -->
    <div id="lyricsModal" class="modal hidden">
        <div class="glass-panel modal-content">
            <button class="close-modal-btn" id="closeModalBtn"><i class="fa-solid fa-xmark"></i></button>
            
            <div class="modal-body">
                <div class="modal-cover-container">
                    <img src="" id="modalCover" alt="Cover">
                    <div class="modal-track-details">
                        <h2 id="modalTitle">Track Title</h2>
                        <p id="modalTags">Tags</p>
                    </div>
                </div>
                
                <div class="lyrics-container">
                    <h3>Lyrics</h3>
                    <p id="modalLyrics">No lyrics available.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Подключаем клиентскую библиотеку Socket.IO (автоматически отдается сервером) -->
    <script src="/socket.io/socket.io.js"></script>
    
    <!-- Наш основной скрипт -->
    <script src="script.js"></script>
</body>
</html>